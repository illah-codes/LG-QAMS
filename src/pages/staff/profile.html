<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - LG QAMS</title>
    <link rel="stylesheet" href="/src/styles/flowbite-tokens.css" />
    <link rel="stylesheet" href="/src/styles/variables.css" />
    <link rel="stylesheet" href="/src/styles/flowbite.css" />
    <link rel="stylesheet" href="/src/styles/main.css" />
  </head>
  <body>
    <div id="app">
      <div class="container page-container max-width-container">
        <!-- Page Header -->
        <div class="page-header">
          <h1 class="page-title">Profile Settings</h1>
          <p class="page-subtitle">Manage your account information</p>
        </div>

        <!-- Profile Information -->
        <div class="card shadow-sm card-spacing">
          <div class="card-header p-6">
            <h2 class="section-title">Personal Information</h2>
          </div>
          <div class="card-body p-6">
            <form onsubmit="updateProfile(event)">
              <div class="grid-2-col">
                <div>
                  <label for="profile-name" class="form-label">Full Name</label>
                  <input type="text" id="profile-name" class="form-input" value="Olaitan Adebayo" readonly />
                </div>
                <div>
                  <label for="profile-email" class="form-label">Email</label>
                  <input type="email" id="profile-email" class="form-input" value="olaitan@lg.gov" />
                </div>
                <div>
                  <label for="profile-staff-id" class="form-label">Staff ID</label>
                  <input type="text" id="profile-staff-id" class="form-input" value="STF001" readonly />
                </div>
                <div>
                  <label for="profile-department" class="form-label">Department</label>
                  <input type="text" id="profile-department" class="form-input" value="Administration" readonly />
                </div>
              </div>
              <div class="flex flex-gap-4 mt-6">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <button type="button" class="btn btn-outline" onclick="resetForm()">Cancel</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Change Password -->
        <div class="card shadow-sm">
          <div class="card-header p-6">
            <h2 class="section-title">Change Password</h2>
          </div>
          <div class="card-body p-6">
            <form onsubmit="changePassword(event)">
              <div class="grid-2-col">
                <div>
                  <label for="current-password" class="form-label">Current Password</label>
                  <input type="password" id="current-password" class="form-input" required />
                </div>
                <div>
                  <label for="new-password" class="form-label">New Password</label>
                  <input type="password" id="new-password" class="form-input" required />
                </div>
                <div>
                  <label for="confirm-password" class="form-label">Confirm New Password</label>
                  <input type="password" id="confirm-password" class="form-input" required />
                </div>
              </div>
              <div id="password-error" class="mb-4 error-message hidden"></div>
              <div class="flex flex-gap-4 mt-6">
                <button type="submit" class="btn btn-primary">Change Password</button>
                <button type="button" class="btn btn-outline" onclick="resetPasswordForm()">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script type="module">
      import { getCurrentUser } from '/src/services/mock-data.js';
      
      const user = getCurrentUser();
      document.getElementById('profile-name').value = user.name;
      document.getElementById('profile-email').value = user.email;
      document.getElementById('profile-staff-id').value = user.id;
      document.getElementById('profile-department').value = user.department;
      
      window.updateProfile = function(event) {
        event.preventDefault();
        alert('Profile updated successfully! (Feature coming soon)');
      };
      
      window.resetForm = function() {
        document.getElementById('profile-email').value = user.email;
      };
      
      window.changePassword = function(event) {
        event.preventDefault();
        const newPassword = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        
        if (newPassword !== confirmPassword) {
          const errorDiv = document.getElementById('password-error');
          errorDiv.classList.remove('hidden');
          errorDiv.textContent = 'New passwords do not match';
          return;
        }
        
        alert('Password changed successfully! (Feature coming soon)');
        resetPasswordForm();
      };
      
      window.resetPasswordForm = function() {
        document.getElementById('current-password').value = '';
        document.getElementById('new-password').value = '';
        document.getElementById('confirm-password').value = '';
        document.getElementById('password-error').classList.add('hidden');
      };
    </script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
